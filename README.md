# CoffeeHub
![image](https://github.com/user-attachments/assets/bd09d73f-5151-4362-82ad-d14af97d3d2f)

**CoffeeHub** - это сервис геймификации в IT-командах, который позволяет повысить мотивацию сотрудников за счёт начисления кружек кофе - внутриигровая валюта, которую можно обменять на мерч. 
Кружки можно получать за активность на репозитории и в корпоративных чатах.

# Наша система  

 ![mdliv_nuclear drawio](https://github.com/user-attachments/assets/9f6638eb-6a62-4506-98c1-c5d26b6dcb1a)

## Модели

### Пользователь
Каждый сотрудник регистрируется на портале. У каждого пользователя есть счётчик кружек кофе, который пополняется от разных действий. Например, новых коммитов или сообщений в чате.  
Каждый пользователь может состоять в одной организации, куда его пригласят. Также авторизованный юзер может прикрепить свой гитхаб профиль.  

### Организация  
Пользователь может создать организацию, в которую можно приглашать других пользователей с помощью системы инвайтов. Каждая организация может прикрепить свой гитхаб репозиторий.  

### Гитхаб профиль  
Используется для гитхаб интеграции. Хранит токен, полученный при OAuth аутентификации. Также он хранит информацию о последних, считанных коммите, пулл реквесте и комментарии.  

### Телеграм профиль  
Используется для телеграм интеграции. Хранит юзер нейм и количество очков за сообщения в корпоративном чате.  

## Гитхаб интеграция  
Как говорилось ранее, пользователь может авторизоваться через гитхаб. Наш гитхаб сервис, получив токен от OAuth приложения, может выполнять запросы к гитхабу. 
Core метод гитхаб интеграции - activity. Он собирает статистику юзера на репозитории организации за последнюю неделю.

**Activity** 
Складывается из коммитов, пулл реквестов, а также комментариев под коммитами. Комментарии анализируются LLM на предмет содержательности и в случае оценки ниже 5 не учитываются.  

**Итоговая формула**  
Подсчёт очков за активность на гитхабе производился по формуле:  
```score = 0.6 * total_commits + good_comments_percentage * total_comments + 0.1 * total_pulls```  

> good_comments_percentage подсчитывается, опираясь на ИИ

## Телеграм интеграция  
Пользователь может получать очки за сообщения в чате телеграмма. Для этого ему необходимо авторизоваться через телеграм. 
На данный момент учитывается только длина сообщения, однако в перспективе также может использоваться LLM для анализа содержания.  

## Запуск сервера  
```$ python start.py```

# Используемые технологии  
## FastAPI  
![image](https://github.com/user-attachments/assets/3cd2fa03-d28b-41fb-9e73-b59b5cb25401)  
> Для Бэкенда.
> Потому что fast и потому что API
## React  
![image](https://github.com/user-attachments/assets/2e16e0a0-96fe-4a88-95dd-794d6a65679d)  
> Для Фронтэнда.
## PyGithub  
![image](https://github.com/user-attachments/assets/a464b233-3d71-4f88-baa4-b847acc3a142)  
> Для интеграции с гитхабом.  
## Aiogram  
![image](https://github.com/user-attachments/assets/d3a1c528-3449-426f-a3aa-9b28021cb17d)  
> Для интеграции с телеграмом.
## Capybarahermes-2.5-mistral-7b.Q3_K_L  
![image](https://github.com/user-attachments/assets/5824f85f-4a4c-42f0-9523-56dd1531027c)
> Как LLM для анализа комментариев на гите.  
